<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace = "com.pj.erp.persistence.HR_DAO">
	
	<insert id="insertMember" parameterType="com.pj.erp.vo.HR_VO">
		insert into users(username, password, e_name, e_gender, e_type, e_code, e_hp, e_address1, e_address2, e_mailcode, level_step, e_nfcCodeNFC, e_disability_type, e_disability_level, start_date)
		values(userid.nextval, #{password}, #{e_name}, #{e_gender}, #{e_type}, #{e_code}, #{e_hp}, #{e_address1}, #{e_address2}, #{e_mailcode}, #{level_step}, #{e_nfcCodeNFC}, #{e_disability_type}, #{e_disability_level}, #{start_date}) 
	</insert>
	<insert id="insertAuth">
		insert into authority(username, authority)
		values(userid.currval, 'ROLE_USER') 
	</insert>
	
	<!-- 부서 등록 -->
	<insert id="insertDepartment" parameterType="java.util.Map">
		insert into department_tbl(department_code, department_name)
		values(#{department_code}, #{department_name})
	</insert>
	
	<!-- 호봉테이블(랭크) -->	
	<select id="rank" resultType="com.pj.erp.vo.HR_RankVO">
		select * from rank_tbl
	</select>
	
	<!-- 호봉테이블(금액) -->
	<select id="pay" resultType="com.pj.erp.vo.HR_PaystepVO">
		select * from paystep_tbl
		Where rank_code = #{rank_code}
	</select>
	
	<!-- 호봉테이블(금액수정) -->
	<update id="updatePay" parameterType="com.pj.erp.vo.HR_PaystepVO">
		Update paystep_tbl
		Set BASE_PAYMENT = #{BASE_PAYMENT}, ADD_PAYMENT = #{ADD_PAYMENT}, EXTENSION_PAYMENT = #{EXTENSION_PAYMENT}
		Where paystep_code = #{paystep_code} And rank_code = #{rank_code}
	</update>
	
</mapper>